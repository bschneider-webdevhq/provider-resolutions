<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../stylesheets/contact.css">
    <style>
        .form-error,
        .req {
            color: red;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        function submitToAPI(e) {
            e.preventDefault();
            var URL = "https://ss0981l870.execute-api.us-east-1.amazonaws.com/product";

            // Regex
            var nameVal = /[A-Za-z]{1}[A-Za-z]/;
            var mobileVal = /[0-9.()-]{10}/;
            var emailVal = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,6})?$/;

            // Input form validation

            // could store ids in an array, and call a single function that checks each to refactor below, make it original
            if (!nameVal.test($("#name-input").val())) {
                document.getElementById("name-error").innerHTML = "Please enter a valid name";
                return;
            }

            if (!mobileVal.test($("#phone-input").val())) {
                document.getElementById("tel-error").innerHTML = "Please enter a valid phone number";
                return;
            }

            if ($("#email-input").val() == "") {
                document.getElementById("email-error").innerHTML = "Email address can not be left blank";
                return;
            }

            if (!emailVal.test($("#email-input").val())) {
                document.getElementById("email-error").innerHTML = "Please enter a valid email address";
                return;
            }

            var name = $("#name-input").val();
            var phone = $("#phone-input").val();
            var email = $("#email-input").val();
            var desc = $("#description-input").val();
            var data = {
                name: name,
                phone: phone,
                email: email,
                desc: desc
            };

            // Stringify JSON posted to API Gateway, triggers SES methods integrated with Lambda 
            $.ajax({
                type: "POST",
                url: "https://ss0981l870.execute-api.us-east-1.amazonaws.com/product",
                dataType: "json",
                crossDomain: "true",
                contentType: "text/plain; charset=utf-8",
                data: JSON.stringify(data),

                // Alerts user, resets form on success.
                success: function () {
                    // clear form and show a success message
                    alert("Your inquiry has been received. Thank you!");
                    document.getElementById("contact-form").reset();
                    location.reload();
                },
                // Alerts user on fail.
                error: function () {
                    alert("Message failed to receive. Please try again later.");
                }
            });
        }
    </script>
    <title>Contact Us</title>
</head>

<body>
    <header class="container-fluid" id="header-container">
        <div class="row">
            <div class="col-12 text-center text-nowrap">
                <div class="display-5 mb-1 pt-2 pb-2"><a href="https://www.provider-resolutions.com/">Provider
                        Resolutions</a>
                </div>
            </div>
        </div>
    </header>
    <section class="post-header-body m-4" id="contact-container">
        <div class="container-fluid">
            <div class="row">
                <div class="d-none d-md-block col-md-6 p-0 m-0 position-relative">
                    <img class="col-12" src="../assets/contact-office.jpg">
                    <div class="text-white col-12 text-center position-absolute" id="address-container">
                        <div class="mb-5">
                            <i class="bi bi-telephone display-6"></i><br>
                            <span style="color: #E37223">Office Number:</span><br>
                            +1 (760) 908-8638
                        </div>
                        <div class="mb-5">
                            <i class="bi bi-geo-alt display-6"></i><br>
                            <span style="color: #E37223">Address:</span><br>
                            Portland, Oregon
                        </div>
                        <div class="mb-5">
                            <i class="bi bi-envelope display-6"></i><br>
                            <span style="color: #E37223">Business Inquiries:</span><br>
                            jmichaelschneidermd@gmail.com
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 p-4">
                    <div class="col-12 text-center display-6 mb-2">
                        Contact Us
                    </div>
                    <div class="text-center mb-3">The team is here to assist. Please allow up to 24 hours for your
                        inquiry to be answered.</div>
                    <div class="col-12" id="form-container">
                        <form id="contact-form" method="post">
                            <label for="name-input">
                                <span class="req">* </span>Name:</span>
                            </label>
                            <input type="text" id="name-input" placeholder="Your Name" class="form-control">
                            <br>
                            <span class="form-error" id="name-error"></span>
                            <label for="phone-input">
                                <span class="req">* </span>Phone:
                            </label>
                            <input type="tel" id="phone-input" placeholder="Your Phone Number" class="form-control">
                            <br>
                            <span class="form-error" id="tel-error"></span>
                            <label for="email-input">
                                <span class="req">* </span>Email:
                            </label>
                            <input type="email" id="email-input" placeholder="Your Email" class="form-control">
                            <br>
                            <span class="form-error" id="email-error"></span>
                            <label for="description-input">
                                How Can We Assist You?
                            </label>
                            <textarea id="description-input" rows="4" cols="0" class="form-control pl-0"
                                placeholder=""></textarea>
                            <br>
                            <button type="button" onClick="submitToAPI(event)"
                                class="col-12 border btn btn-lg btn-success">Submit
                            </button>
                            <br>
                            <br>
                            <span>Fields With <span class="req">*</span> Are Required.</span>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="d-block d-md-none post-header-body m-4">
        <div class="container-fluid" id="contact-mobile">
            <div class="row text-center">
                <div class="col-2 pt-4 pb-4 mb-4 contact-mobile-method">
                    <i class="bi bi-telephone-fill"></i>
                </div>
                <div class="col-10 mb-4 pt-4 contact-mobile-method-detail">
                    <div>+1 (760) 908-8638</div>
                </div>
                <div class="col-2 pt-4 pb-4 mb-4 contact-mobile-method">
                    <i class="bi bi-envelope-fill"></i>
                </div>
                <div class="col-10 p-4 mb-4 text-truncate contact-mobile-method-detail">
                    jmichaelschneidermd@gmail.com
                </div>
                <div class="col-2 pt-4 pb-4 mb-4 contact-mobile-method">
                    <i class="bi bi-geo-alt-fill"></i>
                </div>
                <div class="col-10 p-4 mb-4 contact-mobile-method-detail">
                    Portland, Oregon
                </div>
            </div>
        </div>
    </section>
</body>

<!-- JQuery 3.5.1 -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<!-- Bootstrap 5-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
    crossorigin="anonymous"></script>

</html>